프로젝트 이름
AI 기반 식품 분석 · 건강 코치 서비스 "FoodScan"
요구사항 명세서 및 사업계획서
프로젝트 버전: 1.0
작성일: 2025년 10월 30일
목차
1. 프로젝트 개요 / 2. 요구사항 명세 / 3. 시스템 설계 / 4. 기능 명세 / 5. 사용자 시나리오 / 6. 개발 일정 / 7. 기대 효과 / 8. 위험 관리 / 9. 기술 스택 / 10. 참고 문헌
1. 프로젝트 개요
1.1 프로젝트 배경
초개인화 식습관 관리 수요가 증가했지만, 사용자는 음식 기록과 영양 계산을 직접 해야 하는 불편을 겪고 있습니다. 스마트폰 카메라와 대규모 언어모델을 활용하면 사진 한 장으로 정확한 영양 분석과 권장 섭취 가이드를 제공할 수 있습니다.
1.2 프로젝트 목적
사진 기반 음식 인식과 DB 매칭으로 즉시 영양 정보를 보여주는 웹 서비스를 구축한다.
OpenAI GPT-4o와 Food Matcher 임베딩을 결합해 한국형 식품 데이터에서도 높은 정확도를 확보한다.
사용자 프로필·섭취 이력을 이용해 맞춤 리포트와 건강 목표 달성 힌트를 제공한다.
1.3 프로젝트 범위
React 기반 모바일 우선 UI와 QR/카메라 모드 지원
Laravel 12 REST API, 인증/토큰, 이미지 업로드, OpenAI·FastAPI 연동
SentenceTransformers 임베딩을 사용하는 Food Matcher FastAPI
MySQL 영양 데이터 정제, product_weight 환산, common_name 평균 보정
2. 요구사항 명세
2.1 기능적 요구사항 (Functional Requirements)
F1. 사용자는 이메일/비밀번호로 회원가입·로그인 후 토큰을 발급받는다.
F2. 사진 또는 갤러리 이미지를 업로드하면 OpenAI를 통해 음식명을 추출한다.
F3. Food Matcher는 음식 설명을 임베딩 해 DB 내 최적의 food_code를 반환한다.
F4. API는 영양소, 알레르기, 추천 문구를 JSON으로 응답하고 React UI가 카드를 표시한다.
F5. 사용자 프로필·섭취 로그·알림 이력을 DB에 저장해 추후 리포트에 활용한다.
2.2 비기능적 요구사항 (Non-Functional Requirements)
N1. API 응답 시간은 5초 이내, OpenAI 지연 시 재시도 및 타임아웃 처리
N2. 사용자 사진·토큰은 HTTPS와 JWT로 보호하고, 민감 정보는 암호화한다.
N3. FastAPI와 Laravel 로그를 통합 수집해 오류를 추적한다.
N4. Docker 기반 로컬 개발 환경을 제공하고, staging/prod 분리 구성
N5. 한국어 기본 UI와 영어 fallback을 제공한다.
3. 시스템 설계
3.1 시스템 아키텍처
FoodScan은 React 프런트엔드, Laravel API, FastAPI Food Matcher, MySQL DB로 구성된 3-Tier 구조입니다. React는 Vite 개발 서버와 ngrok 도메인을 사용해 HTTPS/HTTP 모드를 전환하고, Laravel은 OpenAI 및 매칭 서비스와 통신하는 BFF 역할을 수행합니다.
3.2 데이터 흐름도
사용자가 사진을 촬영하거나 업로드해 React에서 /api/foods/analyze 로 전송한다.
Laravel이 이미지 유효성 검증 후 OpenAI GPT-4o 멀티모달 API를 호출한다.
생성된 음식 설명을 FastAPI Food Matcher로 전달해 food_code와 score를 획득한다.
MySQL foods 테이블에서 영양 정보를 조회하고 정제된 값을 조합한다.
JSON 응답을 React가 수신해 결과 카드, 오류 안내, 추천 문구를 표시한다.
3.3 데이터베이스 스키마
주요 테이블은 USERS, MEAL_RECORDS, FOODS, FOOD_EMBEDDINGS입니다. FOODS 테이블은 common_name 평균과 product_weight 환산을 통해 결측값을 최소화했고, FOOD_EMBEDDINGS는 SentenceTransformers 임베딩을 저장해 매칭 속도를 높였습니다.
OpenAI 타임아웃, 임베딩 미매칭, DB 누락 등 상황별로 표준 응답 코드와 에러 메시지를 정의했으며, Laravel 로그 및 Sentry 훅으로 추적합니다. 사용자는 실패 사유와 재시도 안내를 즉시 확인할 수 있습니다.
4. 핵심 기능 구성
4.1 이미지 업로드 및 전처리
React 프런트엔드는 카메라 촬영과 갤러리 선택을 지원하고, 업로드 전에 파일 용량·확장자·EXIF 정보를 검증합니다. 모바일 브라우저에서 FormData를 구성해 Laravel API로 전송하며, 오류 발생 시 즉시 사용자 안내를 제공합니다.
4.2 OpenAI + Food Matcher 연동
Laravel는 수신한 이미지를 저장한 뒤 OpenAI GPT-4o 멀티모달 API에 전달해 음식명·설명을 얻고, 동일한 텍스트를 Food Matcher FastAPI에 보내 임베딩 유사도로 food_code와 score를 계산합니다.
4.3 영양 정보 응답 구성
매칭된 food_code로 FOODS 테이블을 재조회하고 serving_size(기본 100g) 대비 product_weight 비율을 곱해 열량·탄수화물·단백질·지방·당류를 재계산합니다. 동일한 데이터로 탄수화물/단백질/지방 조합을 이용해 혈당 위험도를 상·중·하로 구간화한 뒤 JSON 응답에 포함하며, 프런트엔드는 보정된 수치만 노출합니다.
4.4 상태 관리 및 오류 대응
OpenAI 타임아웃, 임베딩 미매칭, DB 누락 등 주요 예외와 CSV(up.csv) 기반 최신 값이 반영되지 않은 경우를 대비해 Laravel 서비스 단계에서 최신 Food 레코드를 재조회하고 캐시를 갱신합니다. 모든 실패는 로그·알림 훅으로 추적하며, 사용자에게 즉시 재시도 가이드를 제공합니다.
DB 정제 단계에서는 up.csv를 주기적으로 파싱해 serving_size_unit·product_weight_unit을 분리하고, common_name 그룹 평균으로 탄수화물·단백질·지방·당류·식이섬유 결측을 메웁니다. 떡볶이·짜장면 등 주요 품목은 수작업으로 탄수화물과 중량을 보정해 전체 분석 품질을 끌어올렸습니다.
4.5 프런트엔드 UI/반응형 보강
Home.jsx를 재구성해 #01b7a0 테마, 분리된 안내/결과 카드, 바텀 내비게이션을 적용했고 모바일·데스크탑 모두에서 결과 카드가 버튼과 겹치지 않도록 절대 위치와 그리드 레이아웃을 조합했습니다. 혈당 위험도 카드와 영양 카드만 6개 항목(칼로리·탄수화물·단백질·지방·당류·혈당 위험도)으로 정리해 중복 노출을 제거했습니다.
5. 사용자 여정
5.1 회원가입과 온보딩
① QR/링크로 접속하여 이메일·비밀번호로 회원가입한다. ② 나이·성별·키·체중·목표 칼로리를 입력하고 카메라 권한을 허용한다. ③ 튜토리얼에서 사진 업로드 흐름을 체험하며 첫 분석을 완료한다.
5.2 사진 분석 플로우
① 사용자가 사진을 촬영하거나 선택하면 React가 업로드 진행률을 표시한다. ② Laravel은 이미지를 검증 후 OpenAI와 Food Matcher를 순차 호출한다. ③ JSON 응답을 받아 영양 카드, 대체 식단, 오류 메시지를 렌더링한다.
React 결과 영역은 product_weight 기준으로 환산한 칼로리·탄수화물·단백질·지방·당류와 계산된 혈당 위험도만 보여 주며, 혈당 정보·영양 정보 카드가 중복되지 않도록 통합했습니다. 동일 화면에서 분석 결과가 버튼과 겹치지 않게 안내 박스와 결과 카드 높이를 보정했습니다.
5.3 결과 활용 및 기록
분석 결과는 MEAL_RECORDS에 저장되며 사용자는 일/주별 요약을 확인하거나 메모를 추가할 수 있다. 주간 리포트는 이메일/알림으로 전달되고, 누적 데이터는 eGL 모델 도입을 위한 학습 샘플로 축적된다.
6. 개발 일정
6.1 간트 차트
10월: 요구사항 정의 및 DB 정제 / 11월: 프런트·백엔드 핵심 기능 개발 / 12월: AI 파이프라인 안정화 및 테스트, 운영 가이드 작성.
6.2 주차별 상세 계획
W1~W2: 데이터 정제, product_weight 환산, common_name 평균 적용
W3~W4: React UI, 카메라·갤러리 모드 완성, OpenAI 연동
W5~W6: Food Matcher FastAPI, embed_foods 파이프라인 구축
W7~W8: 통합 테스트, 보안 점검, 운영 문서 업데이트
7. 기대 효과
7.1 정량적 목표
분석 성공률 90% 이상, 평균 응답 시간 4초 이하
주간 활성 사용자 1,000명, 재방문율 60% 달성
DB 결측률 5% 이하 유지
7.2 정성적 효과
사용자 측면
사진 한 장으로 영양소를 확인하고 목표 대비 현황을 즉시 파악할 수 있어 자기주도적 식습관 개선을 돕습니다.
서비스 측면
OpenAI와 Food Matcher 기반 모듈형 구조로 다른 서비스와 연동해 부가가치를 창출할 수 있습니다.
시장 측면
국내 식품 DB를 활용한 AI 영양 코치 서비스로 헬스케어 시장에서 차별화 포지셔닝이 가능합니다.
7.3 기대 효과 시각화
대시보드에는 일별 분석 건수, 평균 응답시간, 권장 섭취 달성률을 시계열 그래프로 표시하고, 사용자 세그먼트별 만족도를 히트맵으로 표현합니다.
8. 위험 관리
8.1 잠재적 위험 요소 및 대응 방안
OpenAI API 한도 초과 -> 요청 큐 관리, 이미지 크기 제한, 대체 모델 준비
식품 DB 오류 -> 정기 크롤링, 수동 검수, 평균 보정 로그 유지
개인정보 유출 -> HTTPS 강제, JWT 만료, 최소 데이터 수집 원칙
8.2 품질 보증 계획(이 부분은 참조만 하세요)
React 단위 테스트, Laravel 기능 테스트, FastAPI pytest를 모두 CI에 포함합니다. OWASP ZAP으로 월 1회 취약점 점검을 실시합니다.
9. 기술 스택
9.1 개발 환경
Node.js 18, npm 10, PHP 8.2, Composer 2, Python 3.11, MySQL 8, Redis 6, Windows 11 개발 머신(XAMPP).
9.2 기술 스택 아키텍처
프런트: React, Vite, Tailwind, jsQR / 백엔드: Laravel, Sanctum, Guzzle / AI: OpenAI GPT-4o, SentenceTransformers, FastAPI / 데이터: MySQL, Redis 캐시, S3(이미지 저장 예정).
10. 참고 문헌
Laravel 12 공식 문서 (https://laravel.com/docs/12.x)
OpenAI API Reference (https://platform.openai.com/docs)
SentenceTransformers Documentation (https://www.sbert.net)
식품안전나라 영양성분 데이터베이스 (https://www.foodsafetykorea.go.kr)
OWASP API Security Top 10, 2023